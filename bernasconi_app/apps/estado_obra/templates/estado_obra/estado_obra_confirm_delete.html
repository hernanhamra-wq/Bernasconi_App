{% extends 'base.html' %}
{% load static %}

{% block title %}Eliminar {{ estado.nombre_estado }} - Museo Bernasconi{% endblock %}

{% block page_bg %}
<div class="page-bg bg-fichas"></div>
{% endblock %}

{% block content %}
<div class="card" style="max-width: 500px;">
  <div class="card-header">
    <h2 class="card-title">Eliminar Estado</h2>
  </div>

  {% if total_usos > 0 %}
    <div class="alert alert-warning">
      <strong>No se puede eliminar</strong><br>
      El estado "{{ estado.nombre_estado }}" está en uso:
      <ul style="margin: 8px 0 0 20px;">
        {% if num_fichas > 0 %}<li>{{ num_fichas }} ficha{{ num_fichas|pluralize:"s" }}</li>{% endif %}
        {% if num_movimientos > 0 %}<li>{{ num_movimientos }} movimiento{{ num_movimientos|pluralize:"s" }}</li>{% endif %}
      </ul>
    </div>
    <a href="{% url 'estado_obra:estado_obra_list' %}" class="btn btn-secondary">Volver</a>
  {% else %}
    <p class="mb-2">
      ¿Está seguro que desea eliminar el estado <strong>"{{ estado.nombre_estado }}"</strong>?
    </p>
    <p class="text-muted mb-3">Esta acción no se puede deshacer.</p>

    <form method="post">
      {% csrf_token %}
      <div class="flex gap-2">
        <button type="submit" class="btn btn-danger">Sí, eliminar</button>
        <a href="{% url 'estado_obra:estado_obra_list' %}" class="btn btn-secondary">Cancelar</a>
      </div>
    </form>
  {% endif %}
</div>
{% endblock %}
